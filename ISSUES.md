Issues found in LoadTestDriver
==============================

#### 1. Buttons have to be clicked twice

For buttons actions to execute, they have to be clicked twice. When running those tests with PhantomJS web driver (instead of LoadTestDriver), the buttons only have to be clicked once (as one would expect).
I tried replacing the `.click()` method call with other means of getting the button to execute (double click, focusing it and pressing ENTER key, ...) but to no avail. All those actions have to be berformed twice.
This issue may be related to our application architecture because I managed to get the button to react to one single click but only in cases where the server-side (probably) quickly sends a response back. I could reproduce this with feeding invalid data to the application, then pressing (single click) the button and getting the error message back. I then see that error message in the error-screenshot which is generated by the ScreenShotRule.
I played around with `testBench().waitForVaadin()` and homemade sleep calls (in the tests), but was only successful with performing the button click twice.

#### 2. RegEx error in Scala scripts

Referencing buttons results in an invalid regular expression getting written to the Scala script, if..
* the button has a font-icon as caption and
* the button is referenced by class type.
* the button does not have an ID
The stacktrace when running the script with Gatling is as follows:

```
11:04:46.932 [ERROR] i.g.h.a.ResponseProcessor - ResponseProcessor crashed on session=Session(TestWebEditorCharTypingRendering,1,Map(syncId -> 3,
 clientId -> 3, gatling.http.cache.dns -> io.gatling.http.resolver.ShuffleJdkNameResolver@2a2bdb4, _9_Id -> 9, gatling.http.referer -> http://loc
alhost:8180/dopix_gui/dopixhtmlclient/, seckey -> 68da900a-835c-49c0-a61c-6c3764228f63, _7_Id -> 7, gatling.http.cookies -> CookieJar(Map(CookieK
ey(jsessionid,localhost,/dopix_gui) -> StoredCookie(JSESSIONID=7DA1B01D25E6238E4E8A1B64BCA793BF; path=/dopix_gui; HTTPOnly,true,false,15179114821
82)))),1517911481987,12,OK,List(),io.gatling.core.protocol.ProtocolComponentsRegistry$$Lambda$408/140428850@76465d0f) request=request_5: http://l
ocalhost:8180/dopix_gui/dopixhtmlclient/UIDL/?v-uiId=0  POST    headers:        Origin:http://localhost:8180    Accept:*/*      Content-Type:appl
ication/json; charset=UTF-8     Accept-Language:de-DE,en,*      Accept-Encoding:gzip, deflate   User-Agent:Mozilla/5.0 (Unknown; Linux x86_64) Ap
pleWebKit/538.1 (KHTML, like Gecko) PhantomJS/2.1.1 Safari/538.1        Referer:http://localhost:8180/dopix_gui/dopixhtmlclient/ resourceFetcher=
None redirectCount=0, forwarding user to the next action
java.util.regex.PatternSyntaxException: Illegal repetition near index 60
,"([0-9]*)":\{[a-zA-Z0-9\\":\.%,\-\[\]\s]{0,120}"resources":"{"icon":{"uRL":"fonticon://FontAwesome/f04b"}}
```

#### 3. Undefined Vaadin RPC call ID placeholders

Some Vaadin RPC call ID placeholders are not being defined in the Scala scripts although being used in the request files.
This causes warnings when compiling the Scala scripts and errors when executing them with Gatling.
This concerns RPC calls to `v.v` with `positionx` and `positiony` objects inside. When removing those two objects (while retaining the "real" RPC call to e.g. `com.vaadin.shared.ui.button.ButtonServerRpc`) from the Scala script, the request runs fine.
I ended up, automating this procedure via simple bash and sed magic, but thats far from a clean solution.

#### 4. Regular expression built using unescaped special chars

DOM IDs containing Special characters are not escaped properly before being put into the regular expression to extract Vaadin's internal ID of an element.
This happens, if a Vaadin element is being referenced by it's (DOM) ID and that ID contains special chars, like e.g. `$`.

This results in code like this in the scala skript:

```
val extract_40_Id = regex(""","([0-9]*)":\{[^}]{0,120}"id":"id_with_special_$_chars_which_break_this_regEx_if_they_are_unescaped""").saveAs("_40_Id")
```
